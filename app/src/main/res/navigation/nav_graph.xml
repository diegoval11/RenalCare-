<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/nav_graph"
    app:startDestination="@id/nav_inicio">

    <!-- Destino de Inicio (Sin cambios) -->
    <fragment
        android:id="@+id/nav_inicio"
        android:name="itca.soft.renalcare.ui.inicio.InicioFragment"
        android:label="Inicio"
        tools:layout="@layout/fragment_inicio" />

    <!--
      DESTINO DE CHAT (CONTENEDOR DE PESTAÑAS)
      Este fragmento ahora contiene las pestañas.
      Todas las acciones de navegación (a Voz y a Chat Humano)
      deben originarse aquí.
    -->
    <fragment
        android:id="@+id/nav_chat"
        android:name="itca.soft.renalcare.ui.chat.ChatFragment"
        android:label="Chat"
        tools:layout="@layout/fragment_chat" >

        <!--
          ACCIÓN 1: Navega al chat de voz
          (ID renombrado para coincidir con AiChatFragment.java)
        -->
        <action
            android:id="@+id/action_aiChatFragment_to_voiceChatFragment"
            app:destination="@id/nav_voice_chat"/>

        <!--
          ACCIÓN 2: NUEVA ACCIÓN para ir a la sala de chat humano
          (Llamada desde HumanChatListFragment.java)
        -->
        <action
            android:id="@+id/action_chatFragment_to_humanChatRoomFragment"
            app:destination="@id/nav_human_chat_room"/>

    </fragment>

    <!-- Destino de Alimentos (Sin cambios) -->
    <fragment
        android:id="@+id/nav_alimentos"
        android:name="itca.soft.renalcare.ui.alimentos.AlimentosFragment"
        android:label="Alimentos"
        tools:layout="@layout/fragment_alimentos" />

    <!-- Destino de Perfil (Sin cambios) -->
    <fragment
        android:id="@+id/nav_perfil"
        android:name="itca.soft.renalcare.ui.perfil.PerfilFragment"
        android:label="Perfil"
        tools:layout="@layout/fragment_perfil" />

    <!-- Destino de Chat de Voz (Sin cambios) -->
    <fragment
        android:id="@+id/nav_voice_chat"
        android:name="itca.soft.renalcare.ui.voice.VoiceChatFragment"
        android:label="Asistente de Voz"
        tools:layout="@layout/fragment_voice_chat" />

    <!--
      NUEVO DESTINO: Sala de Chat Humano
      Este es el fragmento que muestra los mensajes
      de una conversación específica.
    -->
    <fragment
        android:id="@+id/nav_human_chat_room"
        android:name="itca.soft.renalcare.ui.websoket.HumanChatRoomFragment"
        android:label="Chat"
        tools:layout="@layout/fragment_human_chat_room" />

</navigation>